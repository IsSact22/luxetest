import{l as S,m as x,T as A,o as l,c as d,a as c,u as r,Z as M,w as h,b as e,p as T,f as U,i as y,q as v,t as i,g as p,F as w,r as V}from"./app-CSqFraU9.js";import{_ as $,s as f}from"./AuthenticatedLayout-BdoQ0EwZ.js";import{_ as D}from"./Paginator-BZq6q3fP.js";import{_ as G}from"./SubMenuUser-BQY25bdy.js";import{S as j}from"./sweetalert2.all-CQ24OLv5.js";import"./ApplicationLogo-ooABeMPC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const I=e("h2",null,"Users",-1),P={class:"flex flex-col mx-auto px-4 mt-4"},F={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},O=e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"},null,-1),Y={class:"relative bg-white rounded-lg p-8 sm:p-10"},q=e("h2",{class:"my-2"},"Edit Permission",-1),z={class:"sm:col-span-4"},L=e("label",{for:"name",class:"block text-sm font-medium leading-6 text-gray-900"},"Name",-1),Z={key:0},H={class:"sm:col-span-4"},J=e("label",{for:"guard_name",class:"block text-sm font-medium leading-6 text-gray-900"},"Guard-Name",-1),K={key:0},Q={class:"flex justify-end mt-6"},R=["disabled"],W={class:"w-full"},X=e("thead",null,[e("tr",null,[e("th",null,"Id"),e("th",null,"Name"),e("th",null,"Guard Name"),e("th",null,"Created at"),e("th",null,"Actions")])],-1),ee={class:"text-center"},te={class:"col-actions"},se=["onClick"],oe=["onClick"],re={colspan:"6"},me={__name:"Index",props:{resource:{type:Object,default:()=>({})}},setup(g){const n=S(),m=x(!1),b=()=>{m.value=!0},_=()=>{m.value=!1,u.value=null,t.reset()},t=A({name:"",guard_name:"web"}),u=x(null),C=s=>{b(),u.value=s.id,t.name=s.name,t.guard_name=s.guard_name},k=()=>{u.value?t.submit("patch",f("permissions.update",u.value),{onSuccess:s=>{_(),n.success("Updated register",{timeout:2e3})},onError:s=>{n.error("An error occurred while updating the record."),console.error(s)}}):t.post(f("permissions.store"),{onSuccess:s=>{_(),n.success("Created register",{timeout:2e3})},onError:s=>{n.error("An error occurred while creating the record."),console.error(s)}})},N=s=>{j.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(a=>{a.isConfirmed&&t.delete(f("permissions.destroy",s),{onSuccess:o=>{n.success("deleted register",{timeout:2e3}),t.reset()},onError:o=>{n.error("An error occurred while deleting the record.",{timeout:2e3})}})})};return(s,a)=>(l(),d(w,null,[c(r(M),{title:"Users"}),c($,null,{header:h(()=>[I]),default:h(()=>[e("div",P,[c(G,{onNewPermission:b}),c(T,{name:"modal-transition"},{default:h(()=>[m.value?(l(),d("div",F,[O,e("div",Y,[q,e("form",{onSubmit:U(k,["prevent"]),class:"px-4"},[e("div",z,[L,y(e("input",{type:"text",name:"name",id:"name",placeholder:"Permission Name","onUpdate:modelValue":a[0]||(a[0]=o=>r(t).name=o),autocomplete:"off"},null,512),[[v,r(t).name]]),r(t).errors.name?(l(),d("div",Z,i(r(t).errors.name),1)):p("",!0)]),e("div",H,[J,y(e("input",{type:"text",name:"guard_name",id:"guard_name",placeholder:"Guard Name","onUpdate:modelValue":a[1]||(a[1]=o=>r(t).guard_name=o),readonly:""},null,512),[[v,r(t).guard_name]]),r(t).errors.guard_name?(l(),d("div",K,i(r(t).errors.guard_name),1)):p("",!0)]),e("div",Q,[e("button",{disabled:r(t).processing,type:"submit",class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"}," Guardar ",8,R),e("button",{type:"button",onClick:_,class:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded ml-2"}," Cancelar ")])],32)])])):p("",!0)]),_:1}),e("table",W,[X,e("tbody",null,[(l(!0),d(w,null,V(g.resource.data,(o,B)=>(l(),d("tr",{key:B},[e("td",null,i(o.id),1),e("td",null,i(o.name),1),e("td",null,i(o.guard_name),1),e("td",ee,i(o.created_at),1),e("td",te,[e("button",{class:"b-edit",onClick:E=>C(o)},"Edit",8,se),e("button",{class:"b-delete",onClick:E=>N(o.id)},"Delete",8,oe)])]))),128))]),e("tfoot",null,[e("tr",null,[e("td",re,[c(D,{data:g.resource},null,8,["data"])])])])])])]),_:1})],64))}};export{me as default};
