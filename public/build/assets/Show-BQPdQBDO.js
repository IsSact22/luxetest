import{o as d,f as u,b as e,n as P,g as k,F as q,q as B,t as n,l as H,T as K,m as y,z as b,B as J,u as s,A as $,a as x,w as C,d as N,e as T,s as U,k as S,h as W,Q as z,D as O,Z as X,i as R,H as j,G,c as Y,p as ee,j as te}from"./app-askt8K5R.js";import{_ as se}from"./AuthenticatedLayout-C8YoEsIG.js";import{_ as le}from"./lodash-B5lqERO_.js";import{_ as oe}from"./InputLabel-CMp-l0Db.js";import{u as ae}from"./formatCurrency-DyGBh4OH.js";import{_ as re}from"./SecondaryButton-BhzfGBlS.js";import{P as ne}from"./PrimaryButton-BXnti5dc.js";import{_ as ie}from"./Checkbox-BlyFevJG.js";import{_ as de}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-B40Cx27m.js";const ue={class:"flex flex-row items-center mt-4"},ce=e("span",{"aria-hidden":"true"},"«",-1),me=[ce],pe=["onClick"],ve=e("span",{"aria-hidden":"true"},"»",-1),be=[ve],_e={__name:"Paginator2",props:{currentPage:{type:Number,required:!0},lastPage:{type:Number,required:!0}},emits:["page-change"],setup(a,{emit:w}){const c=a,V=w,l=A=>{A>=1&&A<=c.lastPage&&V("page-change",A)};return(A,f)=>(d(),u("div",null,[e("div",ue,[a.currentPage!==1?(d(),u("button",{key:0,class:P(["mr-1 mb-1 px-4 py-3 text-sm leading-4 text-gray-500 border rounded cursor-pointer",{disabled:a.currentPage===1}]),onClick:f[0]||(f[0]=h=>l(a.currentPage-1)),"aria-label":"Previous"},me,2)):k("",!0),(d(!0),u(q,null,B(a.lastPage,h=>(d(),u("button",{key:h,class:P(["mr-1 mb-1 px-4 py-3 text-sm leading-4 text-gray-500 border rounded cursor-pointer",{"hover:text-blue-700 hover:bg-blue-300":a.currentPage!==h},{"text-blue-700 bg-blue-300":a.currentPage===h}]),onClick:_=>l(h)},n(h),11,pe))),128)),a.currentPage!==a.lastPage?(d(),u("button",{key:1,class:P(["mr-1 mb-1 px-4 py-3 text-sm leading-4 text-gray-500 border rounded cursor-pointer hover:text-blue-700 hover:bg-blue-300",{disabled:a.currentPage===a.lastPage}]),onClick:f[1]||(f[1]=h=>l(a.currentPage+1)),"aria-label":"Next"},be,2)):k("",!0)])]))}},fe={class:"max-w-7xl p-4 sm:p-8 bg-white shadow sm:rounded-lg"},he=e("div",null,[e("small",{class:"text-neutral-600"},"at least one activity is required and all fields are required")],-1),ge=e("hr",{class:"my-1"},null,-1),xe={class:"grid grid-cols-3 gap-4"},ye={class:"flex flex-col space-y-2"},ke=e("label",{class:"block text-sm text-slate-500 font-semibold",for:"status"},"Status",-1),we=["disabled","selected","value"],$e={key:0},Ce=e("label",{class:"block text-sm text-slate-500 font-semibold",for:"date"},"Date",-1),Pe=e("label",{class:"block text-sm text-slate-500 font-semibold",for:"Name"},"Activity Name",-1),Ae=e("label",{class:"block text-sm text-slate-500 font-semibold",for:"description"},"Description",-1),Me={class:"flex flex-col space-y-2"},Se=e("label",{class:"block text-sm text-slate-500 font-semibold",for:"comments"},"Comments",-1),Ve=e("label",{class:"block text-sm text-slate-500 font-semibold",for:"material_information"},"Material Information",-1),De={class:"flex flex-col space-y-2"},Ne=e("label",{class:"block text-sm text-slate-500 font-semibold",for:"labor_mount"},"Labor Mount",-1),Ue=e("label",{class:"block text-sm text-slate-500 font-semibold",for:"material_mount"},"Material Mount",-1),qe=e("label",{class:"block text-sm text-slate-500 font-semibold",for:"awr"},"AWR",-1),Ie={class:"flex flex-row justify-items-center items-center space-x-3",for:"required"},je=e("span",{class:"font-bold"},"Activity has required",-1),Te={class:"mt-4"},Be={class:"flex flex-row place-content-around"},Ee={class:"flex-1 space-x-7"},Fe={__name:"AddActivityComponent",props:{camoId:Number},emits:["event-close","sent-activity"],setup(a,{emit:w}){const c=H(),l=K({camo_id:a.camoId,required:!1,date:"",name:"",description:"",status:"pending",comments:"",labor_mount:"",material_mount:"",material_information:"",awr:"",approval_status:""}),A=y([{value:null,label:"Select"},{value:"pending",label:"Pending"},{value:"in_progress",label:"in Progress"},{value:"completed",label:"completed"}]),f=w,h=async()=>{try{const g=await axios.post(U("camo_activities.add"),l.data());f("sent-activity"),c.success("added Activity"),_()}catch(g){c.error("error adding activity"),console.error(g)}},_=()=>{f("event-close")};return(g,i)=>(d(),u("div",fe,[e("form",{id:"addActivity",ref:"addActivity",onSubmit:i[10]||(i[10]=T((...r)=>g.submit&&g.submit(...r),["prevent"]))},[he,ge,e("div",xe,[e("div",ye,[e("div",null,[ke,b(e("select",{id:"status","onUpdate:modelValue":i[0]||(i[0]=r=>s(l).status=r),class:"inline-block rounded-md border-gray-300",name:"status"},[(d(!0),u(q,null,B(A.value,(r,I)=>(d(),u("option",{key:I,disabled:r.value===null,selected:r.value===s(l).status,value:r.value},n(r.label),9,we))),128))],512),[[J,s(l).status]])]),s(l).status!=="pending"?(d(),u("div",$e,[Ce,b(e("input",{id:"date","onUpdate:modelValue":i[1]||(i[1]=r=>s(l).date=r),class:"inline-block rounded-md border-gray-300",name:"date",type:"date"},null,512),[[$,s(l).date]])])):k("",!0),e("div",null,[Pe,b(e("input",{id:"name","onUpdate:modelValue":i[2]||(i[2]=r=>s(l).name=r),class:"inline-block rounded-md border-gray-300 placeholder-custom",name:"name",placeholder:"Activity name",type:"text"},null,512),[[$,s(l).name]])]),e("div",null,[Ae,b(e("textarea",{id:"description","onUpdate:modelValue":i[3]||(i[3]=r=>s(l).description=r),class:"inline-block rounded-md border-gray-300 placeholder-custom",cols:"30",name:"description",placeholder:"Short description",rows:"3"},null,512),[[$,s(l).description]])])]),e("div",Me,[e("div",null,[Se,b(e("textarea",{id:"comments","onUpdate:modelValue":i[4]||(i[4]=r=>s(l).comments=r),class:"inline-block rounded-md border-gray-300 placeholder-custom",cols:"30",name:"comments",placeholder:"About activity",rows:"3"},null,512),[[$,s(l).comments]])]),e("div",null,[Ve,b(e("textarea",{id:"material_information","onUpdate:modelValue":i[5]||(i[5]=r=>s(l).material_information=r),class:"inline-block rounded-md border-gray-300 placeholder-custom",cols:"30",name:"material_information",placeholder:"About materials",rows:"3"},null,512),[[$,s(l).material_information]])])]),e("div",De,[e("div",null,[Ne,b(e("input",{id:"labor_mount","onUpdate:modelValue":i[6]||(i[6]=r=>s(l).labor_mount=r),class:"inline-block rounded-md border-gray-300 text-right",name:"labor_mount",placeholder:"0.00",type:"number"},null,512),[[$,s(l).labor_mount]])]),e("div",null,[Ue,b(e("input",{id:"material_mount","onUpdate:modelValue":i[7]||(i[7]=r=>s(l).material_mount=r),class:"inline-block rounded-md border-gray-300 text-right",name:"material_mount",placeholder:"0.00",type:"number"},null,512),[[$,s(l).material_mount]])]),e("div",null,[qe,b(e("input",{id:"awr","onUpdate:modelValue":i[8]||(i[8]=r=>s(l).awr=r),class:"inline-block rounded-md border-gray-300 placeholder-custom",name:"awr",placeholder:"certifications",type:"text"},null,512),[[$,s(l).awr]])])])]),e("div",null,[e("label",Ie,[je,x(ie,{modelValue:s(l).required,"onUpdate:modelValue":i[9]||(i[9]=r=>s(l).required=r),checked:s(l).required,value:"true"},null,8,["modelValue","checked"])])]),e("div",Te,[e("div",Be,[e("div",Ee,[x(ne,{type:"submit",disabled:s(l).processing,onClick:h},{default:C(()=>[N("ADD")]),_:1},8,["disabled"]),x(re,{onClick:_},{default:C(()=>[N(" Close ")]),_:1})])])])],544)]))}},v=a=>(ee("data-v-93bdfc2a"),a=a(),te(),a),Le=v(()=>e("h2",null,"Camos",-1)),We={class:"flex flex-col justify-items-center items-center max-w-7xl mx-auto"},ze={class:"my-4 border rounded-md px-4 py-4"},Oe={class:"space-x-3 my-3"},Re={class:"grid grid-cols-3 gap-4 my-3"},Ge={class:"flex flex-col px-4 border rounded-md bg-gray-100/50"},He=v(()=>e("h1",{class:"text-gray-700"},"Customer Data",-1)),Ke=v(()=>e("hr",{class:"h-0.5 bg-neutral-400"},null,-1)),Qe={class:"grid grid-cols-2 gap-2"},Ze=v(()=>e("div",null,[e("p",null,"Customer"),e("p",null,"Contract"),e("p",null,"Project Manager"),e("p",null,"Location")],-1)),Je={class:"flex flex-col px-4 border rounded-md bg-gray-100/50"},Xe=v(()=>e("h1",{class:"text-gray-700"},"Project",-1)),Ye=v(()=>e("hr",{class:"h-0.5 bg-neutral-400"},null,-1)),et={class:"grid grid-cols-2 gap-2"},tt=v(()=>e("div",null,[e("p",null,"Aircraft"),e("p",null,"Description"),e("p",null,"Start Date"),e("p",null,"Finish Date")],-1)),st={class:"text-right"},lt={class:"text-right line-clamp-1"},ot={class:"text-right"},at={class:"text-right"},rt={class:"flex flex-col px-4 border rounded-md bg-gray-100/50"},nt=v(()=>e("h1",{class:"text-gray-700"},"Summary",-1)),it=v(()=>e("hr",{class:"h-0.5 bg-neutral-400"},null,-1)),dt={class:"grid grid-cols-2 gap-2"},ut=v(()=>e("div",null,[e("p",null,"Labor Mount"),e("p",null,"Material Mount"),e("p",null,"Total"),e("p",null,"Waiting Approval"),e("p",null,"Pending"),e("p",null,"In Progress"),e("p",null,"Completed"),e("p",null,"Total Activities")],-1)),ct={class:"text-right"},mt={class:"text-right"},pt=v(()=>e("hr",{class:"h-0.5 bg-gray-300"},null,-1)),vt={class:"text-right text-green-700"},bt=v(()=>e("hr",null,null,-1)),_t={key:0,class:"text-right"},ft={class:"badge-alert"},ht={key:1,class:"text-right"},gt={class:"badge-pending"},xt={key:2,class:"text-right"},yt={class:"badge-progress"},kt={key:3,class:"text-right"},wt={class:"badge-completed"},$t={key:4,class:"text-right"},Ct={class:"badge-info"},Pt={class:"my-2"},At={class:"flex items-center -mx-4 space-x-2 overflow-x-auto overflow-y-hidden sm:justify-center flex-nowrap my-4"},Mt={class:"table-auto w-full"},St=v(()=>e("thead",null,[e("tr",null,[e("th",null,"id"),e("th",null,"Date"),e("th",null,"Name"),e("th",null,"Status"),e("th",null,"Labor/Mount"),e("th",null,"Material/Mount"),e("th",null,"AWR"),e("th",null,"Approval/Status"),e("th",null,"Actions")])],-1)),Vt={class:"text-xs"},Dt={class:"flex flex-row justify-items-center items-center space-x-2"},Nt=v(()=>e("span",null,[e("svg",{class:"w-4 h-4",viewBox:"0 0 21 21",xmlns:"http://www.w3.org/2000/svg"},[e("g",{fill:"none","fill-rule":"evenodd",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},[e("circle",{cx:"8.5",cy:"8.5",r:"5"}),e("path",{d:"m17.571 17.5-5.571-5.5"})])])],-1)),Ut={class:"flex place-content-center"},qt={key:0,class:"badge-pending"},It={key:1,class:"badge-progress"},jt={key:2,class:"badge-completed"},Tt={class:"text-right"},Bt={class:"text-right"},Et={class:"line-clamp-1"},Ft={class:"flex place-content-center"},Lt={key:0,class:"badge-pending"},Wt={key:1,class:"badge-approval"},zt={class:"col-actions"},Ot={class:"flex float-right"},Rt={__name:"Show",props:{resource:{type:Object,default:()=>({})}},setup(a){H();const{formatCurrency:w}=ae(),c=a,V=S(()=>c.resource.data&&c.resource.data.activities?c.resource.data.activities.filter(t=>t.approval_status==="pending"):[]),l=S(()=>c.resource.data&&c.resource.data.activities?c.resource.data.activities.filter(t=>t.status==="pending"):[]),A=S(()=>c.resource.data&&c.resource.data.activities?c.resource.data.activities.filter(t=>t.status==="in_progress"):[]),f=S(()=>c.resource.data&&c.resource.data.activities?c.resource.data.activities.filter(t=>t.status==="completed"):[]),h=y(c.resource.data.id),_=y(null),g=y(null),i=y(null),r=y(""),I=m=>{console.log(m),g.value=m},p=y(null);W(()=>{(z().props.auth.user.is_owner||z().props.auth.user.is_crew)&&(p.value="approval_status.pending")});const D=async()=>{try{const m=await axios.get(U("camos.activities"),{params:{camo_id:h.value,page:g.value,search:r.value,filter:p.value}});_.value=m.data,g.value=m.data.current_page,i.value=m.data.last_page}catch(m){console.error(m)}};O(p,m=>{D()}),W(D);const E=le.throttle(function(){D()},200);O([g],D);const F=S(()=>c.resource.data.activities.reduce((t,o)=>t+Number(o.labor_mount),0).toFixed(2)),L=S(()=>c.resource.data.activities.reduce((t,o)=>t+Number(o.material_mount),0).toFixed(2));y(!1),y(null),K({name:"",date:"",description:"",comments:"",awr:"",labor_mount:"",material_mount:"",material_information:"",status:"",approval_status:""});const M=y(!1),Q=m=>{M.value=!1};return(m,t)=>(d(),u(q,null,[x(s(X),{title:"Camos"}),x(se,null,{header:C(()=>[Le]),default:C(()=>[e("div",We,[e("div",ze,[e("div",Oe,[x(s(R),{href:s(U)("camos.index"),class:"btn-goto"},{default:C(()=>[N("back to Camos ")]),_:1},8,["href"]),m.$page.props.auth.user.is_cam?(d(),u("button",{key:0,class:"btn-goto",onClick:t[0]||(t[0]=o=>M.value=!0)}," new activity for this CAMO ")):k("",!0),e("button",{class:"btn-inDev",title:"Under development",type:"button",onClickPassive:t[1]||(t[1]=T(()=>{},["prevent"]))}," Camo to PDF ",32),e("button",{class:"btn-inDev",title:"Under development",type:"button",onClickPassive:t[2]||(t[2]=T(()=>{},["prevent"]))}," Archive Camo ",32)]),e("div",Re,[e("div",Ge,[He,Ke,e("div",Qe,[Ze,e("div",null,[e("p",null,n(a.resource.data.customer),1),e("p",null,n(a.resource.data.contract),1),e("p",null,n(a.resource.data.cam),1),e("p",null,n(a.resource.data.location),1)])])]),e("div",Je,[Xe,Ye,e("div",et,[tt,e("div",null,[e("p",st,n(a.resource.data.aircraft.model_aircraft.name)+" / "+n(a.resource.data.aircraft.register),1),e("p",lt,n(a.resource.data.description),1),e("p",ot,n(a.resource.data.start_date),1),e("p",at,n(a.resource.data.finish_date),1)])])]),e("div",rt,[nt,it,e("div",dt,[ut,e("div",null,[e("p",ct,n(s(w)(F.value)),1),e("p",mt,n(s(w)(L.value)),1),pt,e("p",vt,n(s(w)(Number(F.value)+Number(L.value))),1),bt,V.value?(d(),u("p",_t,[e("span",ft,n(V.value.length),1)])):k("",!0),l.value?(d(),u("p",ht,[e("span",gt,n(l.value.length),1)])):k("",!0),f.value?(d(),u("p",xt,[e("span",yt,n(A.value.length),1)])):k("",!0),f.value?(d(),u("p",kt,[e("span",wt,n(f.value.length),1)])):k("",!0),_.value&&_.value.total?(d(),u("p",$t,[e("span",Ct,n(_.value.total),1)])):k("",!0)])])])]),e("div",null,[b(e("form",Pt,[x(oe,{for:"search"},{default:C(()=>[N("Search")]),_:1}),b(e("input",{id:"search","onUpdate:modelValue":t[3]||(t[3]=o=>r.value=o),class:"px-4 py-2 rounded-md border-gray-300 w-3/12",name:"search",placeholder:"type for search and clear to reset",type:"text",onKeyup:t[4]||(t[4]=(...o)=>s(E)&&s(E)(...o))},null,544),[[$,r.value]])],512),[[j,!M.value]]),x(G,{appear:"",name:"fade",onAfterEnter:M.value},{default:C(()=>[b(x(Fe,{ref:"addActivityComponent","camo-id":a.resource.data.id,onEventClose:Q,onSentActivity:D},null,8,["camo-id"]),[[j,M.value]])]),_:1},8,["onAfterEnter"]),x(G,{appear:"",name:"fade",onAfterEnter:t[11]||(t[11]=o=>!M.value)},{default:C(()=>[b(e("div",null,[e("div",At,[e("button",{class:P([{"border-b-blue-400":p.value===null},"flex items-center flex-shrink-0 px-5 py-2 border-b-4"]),href:"#","preserve-scroll":"",rel:"noopener noreferrer",onClick:t[5]||(t[5]=o=>p.value=null)}," All ",2),e("button",{class:P([{"border-b-blue-400":p.value==="approval_status.approved"},"flex items-center flex-shrink-0 px-5 py-2 border-b-4"]),href:"#","preserve-scroll":"",rel:"noopener noreferrer",onClick:t[6]||(t[6]=o=>p.value="approval_status.approved")}," Approved ",2),e("button",{class:P([{"border-b-blue-400":p.value==="approval_status.pending"},"flex items-center flex-shrink-0 px-5 py-2 border-b-4"]),href:"#","preserve-scroll":"",rel:"noopener noreferrer",onClick:t[7]||(t[7]=o=>p.value="approval_status.pending")}," Pending Approval ",2),e("button",{class:P([{"border-b-blue-400":p.value==="status.pending"},"flex items-center flex-shrink-0 px-5 py-2 border-b-4"]),href:"#","preserve-scroll":"",rel:"noopener noreferrer",onClick:t[8]||(t[8]=o=>p.value="status.pending")}," Pending ",2),e("button",{class:P([{"border-b-blue-400":p.value==="status.in_progress"},"flex items-center flex-shrink-0 px-5 py-2 border-b-4"]),href:"#","preserve-scroll":"",rel:"noopener noreferrer",onClick:t[9]||(t[9]=o=>p.value="status.in_progress")}," In Progress ",2),e("button",{class:P([{"border-b-blue-400":p.value==="status.completed"},"flex items-center flex-shrink-0 px-5 py-2 border-b-4"]),href:"#","preserve-scroll":"",rel:"noopener noreferrer",onClick:t[10]||(t[10]=o=>p.value="status.completed")}," Completed ",2)]),e("table",Mt,[St,e("tbody",null,[(d(!0),u(q,null,B(_.value&&_.value.resource,(o,Z)=>(d(),u("tr",{key:Z},[e("td",null,n(o.id),1),e("td",Vt,n(o.date),1),e("td",null,[e("div",Dt,[Nt,e("span",null,n(o.name),1)])]),e("td",Ut,[o.status==="pending"?(d(),u("span",qt,n(o.status),1)):o.status==="in_progress"?(d(),u("span",It,n(o.status),1)):(d(),u("span",jt,n(o.status),1))]),e("td",Tt,n(s(w)(o.labor_mount)),1),e("td",Bt,n(s(w)(o.material_mount)),1),e("td",null,[e("span",Et,n(o.awr),1)]),e("td",Ft,[o.approval_status==="pending"?(d(),u("span",Lt,n(o.approval_status),1)):(d(),u("span",Wt,n(o.approval_status),1))]),e("td",zt,[x(s(R),{href:s(U)("camo_activities.edit",o.id),class:"btn-show"},{default:C(()=>[N("Edit ")]),_:2},1032,["href"])])]))),128))])]),e("div",Ot,[_.value&&_.value.total>9?(d(),Y(_e,{key:0,"current-page":g.value,"last-page":i.value,onPageChange:I},null,8,["current-page","last-page"])):k("",!0)])],512),[[j,!M.value]])]),_:1})])])])]),_:1})],64))}},ss=de(Rt,[["__scopeId","data-v-93bdfc2a"]]);export{ss as default};
