import{o as d,f as u,b as e,n as C,g as y,F as U,s as B,t as n,l as G,T as H,m as x,y as b,A as J,u as s,z as w,a as k,w as A,d as q,e as T,B as N,k as S,h as O,Q as W,D as z,Z as X,i as Y,H as j,G as R,c as ee,O as te,p as se,j as le}from"./app-DD_xg5FP.js";import{_ as oe}from"./AuthenticatedLayout-CNitevvd.js";import{_ as ae}from"./lodash-D9WWzBpD.js";import{_ as re}from"./InputLabel-rppvtNdl.js";import{u as ne}from"./formatCurrency-DyGBh4OH.js";import{_ as ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as de}from"./SecondaryButton-CGbPYDS2.js";import{P as ue}from"./PrimaryButton-9_0ieUTG.js";import{_ as ce}from"./Checkbox-BiLxl78w.js";import"./ApplicationLogo-CIt8cWuB.js";const me={class:"flex flex-row items-center mt-4"},pe=e("span",{"aria-hidden":"true"},"«",-1),ve=[pe],be=["onClick"],_e=e("span",{"aria-hidden":"true"},"»",-1),he=[_e],fe={__name:"Paginator2",props:{currentPage:{type:Number,required:!0},lastPage:{type:Number,required:!0}},emits:["page-change"],setup(r,{emit:$}){const c=r,V=$,l=P=>{P>=1&&P<=c.lastPage&&V("page-change",P)};return(P,h)=>(d(),u("div",null,[e("div",me,[r.currentPage!==1?(d(),u("button",{key:0,class:C(["mr-1 mb-1 px-4 py-3 text-sm leading-4 text-gray-500 border rounded cursor-pointer",{disabled:r.currentPage===1}]),onClick:h[0]||(h[0]=f=>l(r.currentPage-1)),"aria-label":"Previous"},ve,2)):y("",!0),(d(!0),u(U,null,B(r.lastPage,f=>(d(),u("button",{key:f,class:C(["mr-1 mb-1 px-4 py-3 text-sm leading-4 text-gray-500 border rounded cursor-pointer",{"hover:text-blue-700 hover:bg-blue-300":r.currentPage!==f},{"text-blue-700 bg-blue-300":r.currentPage===f}]),onClick:_=>l(f)},n(f),11,be))),128)),r.currentPage!==r.lastPage?(d(),u("button",{key:1,class:C(["mr-1 mb-1 px-4 py-3 text-sm leading-4 text-gray-500 border rounded cursor-pointer hover:text-blue-700 hover:bg-blue-300",{disabled:r.currentPage===r.lastPage}]),onClick:h[1]||(h[1]=f=>l(r.currentPage+1)),"aria-label":"Next"},he,2)):y("",!0)])]))}},ge={class:"max-w-7xl p-4 sm:p-8 bg-white shadow sm:rounded-lg"},xe=e("div",null,[e("small",{class:"text-neutral-600"},"at least one activity is required and all fields are required")],-1),ye=e("hr",{class:"my-1"},null,-1),ke={class:"grid grid-cols-3 gap-4"},$e={class:"flex flex-col space-y-2"},we=e("label",{class:"block text-sm text-slate-500 font-semibold",for:"status"},"Status",-1),Ce=["disabled","selected","value"],Pe={key:0},Ae=e("label",{class:"block text-sm text-slate-500 font-semibold",for:"date"},"Date",-1),Me=e("label",{class:"block text-sm text-slate-500 font-semibold",for:"Name"},"Activity Name",-1),Se=e("label",{class:"block text-sm text-slate-500 font-semibold",for:"description"},"Description",-1),Ve={class:"flex flex-col space-y-2"},De=e("label",{class:"block text-sm text-slate-500 font-semibold",for:"comments"},"Comments",-1),Ne=e("label",{class:"block text-sm text-slate-500 font-semibold",for:"material_information"},"Material Information",-1),Ue={class:"flex flex-col space-y-2"},qe=e("label",{class:"block text-sm text-slate-500 font-semibold",for:"labor_mount"},"Labor Mount",-1),Ie=e("label",{class:"block text-sm text-slate-500 font-semibold",for:"material_mount"},"Material Mount",-1),je=e("label",{class:"block text-sm text-slate-500 font-semibold",for:"awr"},"AWR",-1),Te={class:"flex flex-row justify-items-center items-center space-x-3",for:"required"},Be=e("span",{class:"font-bold"},"Activity has required",-1),Fe={class:"mt-4"},Le={class:"flex flex-row place-content-around"},Ee={class:"flex-1 space-x-7"},Oe={__name:"AddActivityComponent",props:{camoId:Number},emits:["event-close","sent-activity"],setup(r,{emit:$}){const c=G(),l=H({camo_id:r.camoId,required:!1,date:"",name:"",description:"",status:"pending",comments:"",labor_mount:"",material_mount:"",material_information:"",awr:"",approval_status:""}),P=x([{value:null,label:"Select"},{value:"pending",label:"Pending"},{value:"in_progress",label:"in Progress"},{value:"completed",label:"completed"}]),h=$,f=async()=>{try{const g=await axios.post(N("camo_activities.add"),l.data());h("sent-activity"),c.success("added Activity"),_()}catch(g){c.error("error adding activity"),console.error(g)}},_=()=>{h("event-close")};return(g,i)=>(d(),u("div",ge,[e("form",{id:"addActivity",ref:"addActivity",onSubmit:i[10]||(i[10]=T((...a)=>g.submit&&g.submit(...a),["prevent"]))},[xe,ye,e("div",ke,[e("div",$e,[e("div",null,[we,b(e("select",{id:"status","onUpdate:modelValue":i[0]||(i[0]=a=>s(l).status=a),class:"inline-block rounded-md border-gray-300",name:"status"},[(d(!0),u(U,null,B(P.value,(a,I)=>(d(),u("option",{key:I,disabled:a.value===null,selected:a.value===s(l).status,value:a.value},n(a.label),9,Ce))),128))],512),[[J,s(l).status]])]),s(l).status!=="pending"?(d(),u("div",Pe,[Ae,b(e("input",{id:"date","onUpdate:modelValue":i[1]||(i[1]=a=>s(l).date=a),class:"inline-block rounded-md border-gray-300",name:"date",type:"date"},null,512),[[w,s(l).date]])])):y("",!0),e("div",null,[Me,b(e("input",{id:"name","onUpdate:modelValue":i[2]||(i[2]=a=>s(l).name=a),class:"inline-block rounded-md border-gray-300 placeholder-custom",name:"name",placeholder:"Activity name",type:"text"},null,512),[[w,s(l).name]])]),e("div",null,[Se,b(e("textarea",{id:"description","onUpdate:modelValue":i[3]||(i[3]=a=>s(l).description=a),class:"inline-block rounded-md border-gray-300 placeholder-custom",cols:"30",name:"description",placeholder:"Short description",rows:"3"},null,512),[[w,s(l).description]])])]),e("div",Ve,[e("div",null,[De,b(e("textarea",{id:"comments","onUpdate:modelValue":i[4]||(i[4]=a=>s(l).comments=a),class:"inline-block rounded-md border-gray-300 placeholder-custom",cols:"30",name:"comments",placeholder:"About activity",rows:"3"},null,512),[[w,s(l).comments]])]),e("div",null,[Ne,b(e("textarea",{id:"material_information","onUpdate:modelValue":i[5]||(i[5]=a=>s(l).material_information=a),class:"inline-block rounded-md border-gray-300 placeholder-custom",cols:"30",name:"material_information",placeholder:"About materials",rows:"3"},null,512),[[w,s(l).material_information]])])]),e("div",Ue,[e("div",null,[qe,b(e("input",{id:"labor_mount","onUpdate:modelValue":i[6]||(i[6]=a=>s(l).labor_mount=a),class:"inline-block rounded-md border-gray-300 text-right",name:"labor_mount",placeholder:"0.00",type:"number"},null,512),[[w,s(l).labor_mount]])]),e("div",null,[Ie,b(e("input",{id:"material_mount","onUpdate:modelValue":i[7]||(i[7]=a=>s(l).material_mount=a),class:"inline-block rounded-md border-gray-300 text-right",name:"material_mount",placeholder:"0.00",type:"number"},null,512),[[w,s(l).material_mount]])]),e("div",null,[je,b(e("input",{id:"awr","onUpdate:modelValue":i[8]||(i[8]=a=>s(l).awr=a),class:"inline-block rounded-md border-gray-300 placeholder-custom",name:"awr",placeholder:"certifications",type:"text"},null,512),[[w,s(l).awr]])])])]),e("div",null,[e("label",Te,[Be,k(ce,{modelValue:s(l).required,"onUpdate:modelValue":i[9]||(i[9]=a=>s(l).required=a),checked:s(l).required,value:"true"},null,8,["modelValue","checked"])])]),e("div",Fe,[e("div",Le,[e("div",Ee,[k(ue,{type:"submit",disabled:s(l).processing,onClick:f},{default:A(()=>[q("ADD")]),_:1},8,["disabled"]),k(de,{onClick:_},{default:A(()=>[q(" Close ")]),_:1})])])])],544)]))}},v=r=>(se("data-v-8c39f3d5"),r=r(),le(),r),We=v(()=>e("h2",null,"Camos",-1)),ze={class:"flex flex-col justify-items-center items-center max-w-7xl mx-auto"},Re={class:"my-4 border rounded-md px-4 py-4"},Ge={class:"space-x-3 my-3"},He={class:"grid grid-cols-3 gap-4 my-3"},Ke={class:"flex flex-col px-4 border rounded-md bg-gray-100/50"},Qe=v(()=>e("h1",{class:"text-gray-700"},"Customer Data",-1)),Ze=v(()=>e("hr",{class:"h-0.5 bg-neutral-400"},null,-1)),Je={class:"grid grid-cols-2 gap-2"},Xe=v(()=>e("div",null,[e("p",null,"Customer"),e("p",null,"Contract"),e("p",null,"Project Manager"),e("p",null,"Location")],-1)),Ye={class:"flex flex-col px-4 border rounded-md bg-gray-100/50"},et=v(()=>e("h1",{class:"text-gray-700"},"Project",-1)),tt=v(()=>e("hr",{class:"h-0.5 bg-neutral-400"},null,-1)),st={class:"grid grid-cols-2 gap-2"},lt=v(()=>e("div",null,[e("p",null,"Aircraft"),e("p",null,"Description"),e("p",null,"Start Date"),e("p",null,"Finish Date")],-1)),ot={class:"text-right"},at={class:"text-right line-clamp-1"},rt={class:"text-right"},nt={class:"text-right"},it={class:"flex flex-col px-4 border rounded-md bg-gray-100/50"},dt=v(()=>e("h1",{class:"text-gray-700"},"Summary",-1)),ut=v(()=>e("hr",{class:"h-0.5 bg-neutral-400"},null,-1)),ct={class:"grid grid-cols-2 gap-2"},mt=v(()=>e("div",null,[e("p",null,"Labor Mount"),e("p",null,"Material Mount"),e("p",null,"Total"),e("p",null,"Waiting Approval"),e("p",null,"Pending"),e("p",null,"In Progress"),e("p",null,"Completed"),e("p",null,"Total Activities")],-1)),pt={class:"text-right"},vt={class:"text-right"},bt=v(()=>e("hr",{class:"h-0.5 bg-gray-300"},null,-1)),_t={class:"text-right text-green-700"},ht=v(()=>e("hr",null,null,-1)),ft={key:0,class:"text-right"},gt={class:"badge-alert"},xt={key:1,class:"text-right"},yt={class:"badge-pending"},kt={key:2,class:"text-right"},$t={class:"badge-progress"},wt={key:3,class:"text-right"},Ct={class:"badge-completed"},Pt={key:4,class:"text-right"},At={class:"badge-info"},Mt={class:"my-2"},St={class:"flex items-center -mx-4 space-x-2 overflow-x-auto overflow-y-hidden sm:justify-center flex-nowrap my-4"},Vt={class:"table-auto w-full"},Dt=v(()=>e("thead",null,[e("tr",null,[e("th",null,"id"),e("th",null,"Date"),e("th",null,"Name"),e("th",null,"Status"),e("th",null,"Labor/Mount"),e("th",null,"Material/Mount"),e("th",null,"AWR"),e("th",null,"Approval/Status")])],-1)),Nt=["onClick"],Ut={class:"text-xs"},qt={class:"flex flex-row justify-items-center items-center space-x-2"},It=v(()=>e("span",null,[e("svg",{class:"w-4 h-4",viewBox:"0 0 21 21",xmlns:"http://www.w3.org/2000/svg"},[e("g",{fill:"none","fill-rule":"evenodd",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"},[e("circle",{cx:"8.5",cy:"8.5",r:"5"}),e("path",{d:"m17.571 17.5-5.571-5.5"})])])],-1)),jt={class:"flex place-content-center"},Tt={key:0,class:"badge-pending"},Bt={key:1,class:"badge-progress"},Ft={key:2,class:"badge-completed"},Lt={class:"text-right"},Et={class:"text-right"},Ot={class:"line-clamp-1"},Wt={class:"flex place-content-center"},zt={key:0,class:"badge-pending"},Rt={key:1,class:"badge-approval"},Gt={class:"flex float-right"},Ht={__name:"Show",props:{resource:{type:Object,default:()=>({})}},setup(r){G();const{formatCurrency:$}=ne(),c=r,V=S(()=>c.resource.data&&c.resource.data.activities?c.resource.data.activities.filter(t=>t.approval_status==="pending"):[]),l=S(()=>c.resource.data&&c.resource.data.activities?c.resource.data.activities.filter(t=>t.status==="pending"):[]),P=S(()=>c.resource.data&&c.resource.data.activities?c.resource.data.activities.filter(t=>t.status==="in_progress"):[]),h=S(()=>c.resource.data&&c.resource.data.activities?c.resource.data.activities.filter(t=>t.status==="completed"):[]),f=x(c.resource.data.id),_=x(null),g=x(null),i=x(null),a=x(""),I=m=>{console.log(m),g.value=m},p=x(null);O(()=>{(W().props.auth.user.is_owner||W().props.auth.user.is_crew)&&(p.value="approval_status.pending")});const D=async()=>{try{const m=await axios.get(N("camos.activities"),{params:{camo_id:f.value,page:g.value,search:a.value,filter:p.value}});_.value=m.data,g.value=m.data.current_page,i.value=m.data.last_page}catch(m){console.error(m)}};z(p,m=>{D()}),O(D);const F=ae.throttle(function(){D()},200);z([g],D);const L=S(()=>c.resource.data.activities.reduce((t,o)=>t+Number(o.labor_mount),0).toFixed(2)),E=S(()=>c.resource.data.activities.reduce((t,o)=>t+Number(o.material_mount),0).toFixed(2));x(!1),x(null),H({name:"",date:"",description:"",comments:"",awr:"",labor_mount:"",material_mount:"",material_information:"",status:"",approval_status:""});const K=m=>{te.get(N("camo_activities.edit",m.id))},M=x(!1),Q=m=>{M.value=!1};return(m,t)=>(d(),u(U,null,[k(s(X),{title:"Camos"}),k(oe,null,{header:A(()=>[We]),default:A(()=>[e("div",ze,[e("div",Re,[e("div",Ge,[k(s(Y),{href:s(N)("camos.index"),class:"btn-goto"},{default:A(()=>[q("back to Camos")]),_:1},8,["href"]),m.$page.props.auth.user.is_cam?(d(),u("button",{key:0,onClick:t[0]||(t[0]=o=>M.value=!0),class:"btn-goto"}," new activity for this CAMO ")):y("",!0),e("button",{class:"btn-inDev",title:"Under development",type:"button",onClickPassive:t[1]||(t[1]=T(()=>{},["prevent"]))},"Camo to PDF ",32),e("button",{class:"btn-inDev",title:"Under development",type:"button",onClickPassive:t[2]||(t[2]=T(()=>{},["prevent"]))},"Archive Camo ",32)]),e("div",He,[e("div",Ke,[Qe,Ze,e("div",Je,[Xe,e("div",null,[e("p",null,n(r.resource.data.customer),1),e("p",null,n(r.resource.data.contract),1),e("p",null,n(r.resource.data.cam),1),e("p",null,n(r.resource.data.location),1)])])]),e("div",Ye,[et,tt,e("div",st,[lt,e("div",null,[e("p",ot,n(r.resource.data.aircraft),1),e("p",at,n(r.resource.data.description),1),e("p",rt,n(r.resource.data.start_date),1),e("p",nt,n(r.resource.data.finish_date),1)])])]),e("div",it,[dt,ut,e("div",ct,[mt,e("div",null,[e("p",pt,n(s($)(L.value)),1),e("p",vt,n(s($)(E.value)),1),bt,e("p",_t,n(s($)(Number(L.value)+Number(E.value))),1),ht,V.value?(d(),u("p",ft,[e("span",gt,n(V.value.length),1)])):y("",!0),l.value?(d(),u("p",xt,[e("span",yt,n(l.value.length),1)])):y("",!0),h.value?(d(),u("p",kt,[e("span",$t,n(P.value.length),1)])):y("",!0),h.value?(d(),u("p",wt,[e("span",Ct,n(h.value.length),1)])):y("",!0),_.value&&_.value.total?(d(),u("p",Pt,[e("span",At,n(_.value.total),1)])):y("",!0)])])])]),e("div",null,[b(e("form",Mt,[k(re,{for:"search"},{default:A(()=>[q("Search")]),_:1}),b(e("input",{id:"search","onUpdate:modelValue":t[3]||(t[3]=o=>a.value=o),class:"px-4 py-2 rounded-md border-gray-300 w-3/12",name:"search",placeholder:"type for search and clear to reset",type:"text",onKeyup:t[4]||(t[4]=(...o)=>s(F)&&s(F)(...o))},null,544),[[w,a.value]])],512),[[j,!M.value]]),k(R,{name:"fade",appear:"",onAfterEnter:M.value},{default:A(()=>[b(k(Oe,{"camo-id":r.resource.data.id,onEventClose:Q,onSentActivity:D,ref:"addActivityComponent"},null,8,["camo-id"]),[[j,M.value]])]),_:1},8,["onAfterEnter"]),k(R,{name:"fade",appear:"",onAfterEnter:t[11]||(t[11]=o=>!M.value)},{default:A(()=>[b(e("div",null,[e("div",St,[e("button",{rel:"noopener noreferrer",href:"#",class:C([{"border-b-blue-400":p.value===null},"flex items-center flex-shrink-0 px-5 py-2 border-b-4"]),onClick:t[5]||(t[5]=o=>p.value=null),"preserve-scroll":""},"All",2),e("button",{rel:"noopener noreferrer",href:"#",class:C([{"border-b-blue-400":p.value==="approval_status.approved"},"flex items-center flex-shrink-0 px-5 py-2 border-b-4"]),onClick:t[6]||(t[6]=o=>p.value="approval_status.approved"),"preserve-scroll":""},"Approved",2),e("button",{rel:"noopener noreferrer",href:"#",class:C([{"border-b-blue-400":p.value==="approval_status.pending"},"flex items-center flex-shrink-0 px-5 py-2 border-b-4"]),onClick:t[7]||(t[7]=o=>p.value="approval_status.pending"),"preserve-scroll":""},"Pending Approval",2),e("button",{rel:"noopener noreferrer",href:"#",class:C([{"border-b-blue-400":p.value==="status.pending"},"flex items-center flex-shrink-0 px-5 py-2 border-b-4"]),onClick:t[8]||(t[8]=o=>p.value="status.pending"),"preserve-scroll":""},"Pending",2),e("button",{rel:"noopener noreferrer",href:"#",class:C([{"border-b-blue-400":p.value==="status.in_progress"},"flex items-center flex-shrink-0 px-5 py-2 border-b-4"]),onClick:t[9]||(t[9]=o=>p.value="status.in_progress"),"preserve-scroll":""},"In Progress",2),e("button",{rel:"noopener noreferrer",href:"#",class:C([{"border-b-blue-400":p.value==="status.completed"},"flex items-center flex-shrink-0 px-5 py-2 border-b-4"]),onClick:t[10]||(t[10]=o=>p.value="status.completed"),"preserve-scroll":""},"Completed",2)]),e("table",Vt,[Dt,e("tbody",null,[(d(!0),u(U,null,B(_.value&&_.value.resource,(o,Z)=>(d(),u("tr",{key:Z,class:"cursor-pointer",onClick:Kt=>K(o)},[e("td",null,n(o.id),1),e("td",Ut,n(o.date),1),e("td",null,[e("div",qt,[It,e("span",null,n(o.name),1)])]),e("td",jt,[o.status==="pending"?(d(),u("span",Tt,n(o.status),1)):o.status==="in_progress"?(d(),u("span",Bt,n(o.status),1)):(d(),u("span",Ft,n(o.status),1))]),e("td",Lt,n(s($)(o.labor_mount)),1),e("td",Et,n(s($)(o.material_mount)),1),e("td",null,[e("span",Ot,n(o.awr),1)]),e("td",Wt,[o.approval_status==="pending"?(d(),u("span",zt,n(o.approval_status),1)):(d(),u("span",Rt,n(o.approval_status),1))])],8,Nt))),128))])]),e("div",Gt,[_.value&&_.value.total>9?(d(),ee(fe,{key:0,"current-page":g.value,"last-page":i.value,onPageChange:I},null,8,["current-page","last-page"])):y("",!0)])],512),[[j,!M.value]])]),_:1})])])])]),_:1})],64))}},as=ie(Ht,[["__scopeId","data-v-8c39f3d5"]]);export{as as default};
