import{l as M,m as x,q as E,o as c,f,b as e,d,e as k,F as $,s as j,t as U,p as O,j as T,T as P,v as R,a as i,w as u,x as F,y as v,z as y,u as o,g as S,A as B,c as N,B as L,O as H}from"./app-DD_xg5FP.js";import{_ as K}from"./AuthenticatedLayout-CNitevvd.js";import{_ as g}from"./InputLabel-rppvtNdl.js";import{P as q}from"./PrimaryButton-9_0ieUTG.js";import{_ as z}from"./SecondaryButton-CGbPYDS2.js";/* empty css                                                                    */import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-CIt8cWuB.js";const A=b=>(O("data-v-2874ef38"),b=b(),T(),b),W={class:"card"},Z=A(()=>e("div",{class:"top"},[e("p",null,"Drag & drop images")],-1)),J={key:0},Q={key:1,class:"select"},X={class:"container"},Y=["onClick"],ee=A(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})],-1)),te=[ee],ae=["src","alt"],se={class:"badge-info"},oe={__name:"UploadImage",emits:["images"],setup(b,{emit:r}){M();const a=r,h=x(!1),D=x(null),_=x([]);E(()=>{_.value.length>0&&a("images",_.value)});const V=()=>{D.value.click()},I=l=>{const m=l.target.files;if(m.length!==0)for(let n=0;n<m.length;n++)m[n].type.split("/")[0]==="image"&&(_.value.some(w=>w.name===m[n].name)||_.value.push({name:m[n].name,url:URL.createObjectURL(m[n])}))},p=l=>{_.value.splice(l,1)},s=l=>{l.preventDefault(),h.value=!0,l.dataTransfer.dropEffect="copy"},C=l=>{l.preventDefault(),h.value=!1},t=l=>{l.preventDefault(),h.value=!1;const m=l.dataTransfer.files;for(let n=0;n<m.length;n++)m[n].type.split("/")[0]==="image"&&(_.value.some(w=>w.name===m[n].name)||_.value.push({name:m[n].name,url:URL.createObjectURL(m[n])}))};return(l,m)=>(c(),f("div",W,[Z,e("div",{class:"drag-area",onDragover:k(s,["prevent"]),onDragleave:k(C,["prevent"]),onDrop:k(t,["prevent"])},[h.value?(c(),f("div",Q,"Drop images here")):(c(),f("span",J,[d(" Drag & drop image here or "),e("span",{class:"select",role:"button",onClick:V}," choose ")])),e("input",{type:"file",name:"file",id:"file",ref_key:"fileInput",ref:D,multiple:"",onChange:I},null,544)],32),e("div",X,[(c(!0),f($,null,j(_.value,(n,w)=>(c(),f("div",{class:"image",key:w},[e("span",{class:"bg-white inline-flex items-center justify-center w-6 h-6 rounded-full cursor-pointer",onClick:he=>p(w)},te,8,Y),e("img",{src:n.url,alt:n.name},null,8,ae)]))),128))]),e("div",null,[e("div",null,[d("Added files "),e("span",se,U(_.value.length),1)])])]))}},le=G(oe,[["__scopeId","data-v-2874ef38"]]),ne={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6 mt-6"},re={class:"grid grid-cols-2 gap-4"},de={class:"flex flex-row space-x-3"},ie={key:0},ue={class:"flex flex-row justify-around space-x-3"},me={class:"w-1/2"},ce={class:"flex flex-row justify-items-center space-x-3"},pe={class:"my-1"},fe={class:"my-1"},_e=["disabled"],ve=["value"],ge={key:0,class:"my-2"},ye=["value"],be={class:"flex justify-end space-x-4"},Ce={__name:"Edit",props:{resource:{type:Object,default:()=>({})}},setup(b){const r=b,a=P({camo_id:r.resource.data.camo_id,name:r.resource.data.name,date:r.resource.data.date,description:r.resource.data.description,comments:r.resource.data.comments,awr:r.resource.data.awr,labor_mount:r.resource.data.labor_mount,material_mount:r.resource.data.material_mount,material_information:r.resource.data.material_information,status:r.resource.data.status,add_images:[]}),h=p=>{a.add_images.push(...p)};x(!1);const D=x([{value:"pending",label:"Pending"},{value:"in_progress",label:"in Progress"},{value:"completed",label:"Completed"}]),_=x([{value:"pending",label:"Pending"},{value:"approved",label:"Approved"}]),V=async()=>{try{const p=L("camo_activities.update",r.resource.data.id),s=await axios.patch(p,a.data())}catch(p){console.error(p)}},I=()=>{const p=r.resource.data.camo_id;H.get(L("camos.show",p),{},{replace:!1})};return(p,s)=>{const C=R("Head");return c(),f($,null,[i(C,{title:"Edit Activity"}),i(K,null,{header:u(()=>[e("h2",null,[d("Edit Activity "),e("small",null,U(r.resource.data.id),1)])]),default:u(()=>[e("div",ne,[e("form",{onSubmit:k(V,["prevent"]),onKeydown:s[10]||(s[10]=F(k(()=>{},["prevent"]),["enter"]))},[e("div",re,[e("div",null,[e("div",de,[e("div",null,[i(g,{for:"name"},{default:u(()=>[d("Activity")]),_:1}),v(e("input",{id:"name","onUpdate:modelValue":s[0]||(s[0]=t=>o(a).name=t),class:"rounded-md border-gray-100 bg-gray-200",disabled:"",name:"name",readonly:"",type:"text"},null,512),[[y,o(a).name]])]),o(a).date?(c(),f("div",ie,[i(g,{for:"date"},{default:u(()=>[d("Date")]),_:1}),v(e("input",{id:"date","onUpdate:modelValue":s[1]||(s[1]=t=>o(a).date=t),class:"rounded-md border-gray-100 bg-gray-200",disabled:"",name:"date",readonly:"",type:"text"},null,512),[[y,o(a).date]])])):S("",!0)]),e("div",ue,[e("div",null,[i(g,{for:"description"},{default:u(()=>[d("Description")]),_:1}),v(e("textarea",{id:"description","onUpdate:modelValue":s[2]||(s[2]=t=>o(a).description=t),class:"rounded-md border-gray-300 w-full",cols:"30",name:"description",rows:"5"},null,512),[[y,o(a).description]])]),e("div",null,[i(g,{for:"comments"},{default:u(()=>[d("Comments")]),_:1}),e("div",null,[v(e("textarea",{id:"comments","onUpdate:modelValue":s[3]||(s[3]=t=>o(a).comments=t),class:"rounded-md border-gray-300 w-full",cols:"30",name:"comments",rows:"5"},null,512),[[y,o(a).comments]])])])]),e("div",me,[i(g,{for:"material_mount"},{default:u(()=>[d("AWR")]),_:1}),v(e("input",{id:"awr","onUpdate:modelValue":s[4]||(s[4]=t=>o(a).awr=t),class:"rounded-md border-gray-300 w-full",name:"awr",type:"text"},null,512),[[y,o(a).awr]])]),e("div",ce,[e("div",pe,[i(g,{for:"labor_mount"},{default:u(()=>[d("Labor Mount")]),_:1}),v(e("input",{id:"labor_mount","onUpdate:modelValue":s[5]||(s[5]=t=>o(a).labor_mount=t),class:"text-right rounded-md border-gray-300",name:"labor_mount",step:"0.01",type:"number"},null,512),[[y,o(a).labor_mount]])]),e("div",fe,[i(g,{for:"material_mount"},{default:u(()=>[d("Material Mount")]),_:1}),v(e("input",{id:"labor_mount","onUpdate:modelValue":s[6]||(s[6]=t=>o(a).material_mount=t),class:"text-right rounded-md border-gray-300",name:"labor_mount",step:"0.01",type:"number"},null,512),[[y,o(a).material_mount]])])]),e("div",null,[i(g,null,{default:u(()=>[d("Material Information")]),_:1}),v(e("textarea",{id:"description","onUpdate:modelValue":s[7]||(s[7]=t=>o(a).material_information=t),class:"rounded-md border-gray-300 w-full",cols:"30",name:"description",rows:"2"},null,512),[[y,o(a).material_information]])]),e("div",null,[i(g,{for:"status"},{default:u(()=>[d("Status")]),_:1}),v(e("select",{id:"status","onUpdate:modelValue":s[8]||(s[8]=t=>o(a).status=t),disabled:!p.$page.props.auth.user.is_cam,class:"rounded-md border-gray-300",name:"status"},[(c(!0),f($,null,j(D.value,(t,l)=>(c(),f("option",{key:l,value:t.value},U(t.label),9,ve))),128))],8,_e),[[B,o(a).status]])]),p.$page.props.auth.user.is_owner?(c(),f("div",ge,[i(g,{for:"approval_status"},{default:u(()=>[d("Approval Status")]),_:1}),v(e("select",{id:"status","onUpdate:modelValue":s[9]||(s[9]=t=>o(a).status=t),class:"rounded-md border-gray-300",name:"status"},[(c(!0),f($,null,j(_.value,(t,l)=>(c(),f("option",{key:l,value:t.value},U(t.label),9,ye))),128))],512),[[B,o(a).status]])])):S("",!0)]),e("div",null,[i(le,{onImages:h})])]),e("div",be,[o(a).isDirty?(c(),N(q,{key:0,type:"submit"},{default:u(()=>[d("Save")]),_:1})):S("",!0),i(z,{onClick:I},{default:u(()=>[d("Go Back")]),_:1})])],32)])]),_:1})],64)}}};export{Ce as default};
